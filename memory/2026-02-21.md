# 2026-02-21 项目讨论记录

## 讨论原始记录

**背景**：用户已有需求文档 `AD, Tech Lead, AKP.md`（Tech Lead 面试项目，7天内完成 IntelliKnow KMS），以及软件开发全流程参考文档 `software_rnd_full_process.md`。

**用户核心诉求**：
- 让 Cursor 通过理解需求和开发流程文档，自动完成软件开发和后续迭代
- 为不同开发阶段创建对应的 subagent
- 为每个阶段创建单独目录（prd/, frontend/, backend/ 等），并在各目录下维护 STATUS.md 追踪进度
- 创建 memory/ 目录，按日期记录项目讨论原始记录和结论
- 遇到不清晰的地方，Agent 需要向用户二次确认，并将沟通记录写入 memory 文件
- 每次修改通过 git 记录版本，不同阶段使用不同 branch 前缀，commit 中需包含 memory 文件链接

**用户问答**：
- Q: 项目当前处于哪个阶段，从哪里开始？
  A: **从头开始**（包括市场分析、问题定义等早期阶段）
- Q: subagent 的形式是什么？
  A: **Cursor Agent 配置文件**（AGENT.md 格式，通过 @ 调用，每个 agent 有各自的 context 和职责描述）

## 结论与决策

✅ 项目代号：IntelliKnow KMS

✅ 开发起点：从头开始（Phase 0 战略对齐 → Phase 1 市场研究 → ... → Phase 8 运营）

✅ Subagent 形式：Cursor Agent 配置文件，放在 `.cursor/agents/` 目录下

✅ 目录结构确定：
```
mini-kms/
├── AGENTS.md                  # 项目总 Agent 指南
├── memory/                    # 每日讨论记录
├── 01-discovery/              # 市场与用户研究
├── prd/                       # 产品定义
├── architecture/              # 方案与架构设计
├── frontend/                  # 前端研发
├── backend/                   # 后端研发
├── qa/                        # 测试与质量
├── release/                   # 发布上线
└── .cursor/agents/            # 各阶段 Agent 指令文件
```

✅ Git 分支规范：
- `discovery/*` → 市场研究阶段
- `prd/*` → 产品定义阶段
- `arch/*` → 架构设计阶段
- `frontend/*` → 前端研发阶段
- `backend/*` → 后端研发阶段
- `qa/*` → 测试阶段
- `release/*` → 发布阶段

✅ Commit message 规范：
```
[phase] 简短描述

Memory: memory/YYYY-MM-DD.md
```

✅ STATUS.md 状态标记：`[ ]` 待开始 / `[~]` 进行中 / `[x]` 完成 / `[?]` 待确认 / `[!]` 阻塞

✅ 技术栈方向（来自需求文档推荐）：Python (FastAPI) + SQLite/FAISS + 前端 TBD（architecture agent 阶段确认）

---

**[补充确认 — 同日二次对话]**

用户对3个待确认问题的回答：
- Q: 第二个前端集成选 Teams 还是 WhatsApp？ → A: **Microsoft Teams**
- Q: 前端框架有其他选择吗（比如 React）？ → A: **使用 React（Next.js）**，非 Streamlit
- Q: 部署方式本地还是云端？ → A: **本地 Demo + Docker Compose**

✅ 前端集成组合确定：**Telegram + Microsoft Teams**

✅ 前端框架确定：**Next.js（React）**
- 理由：Admin Dashboard 有5个复杂页面（表格、上传、卡片、图表），React 生态更灵活
- 架构：前后端分离（Next.js Admin UI + FastAPI 后端）

✅ 部署方式确定：**本地 Demo + Docker Compose**
- 产出：`docker-compose.yml` 一键启动全部服务（FastAPI + Next.js + 数据卷挂载）
- 不需要云端部署（Render/Vercel）

✅ **最终技术栈确定**：
| 层 | 技术 |
|----|------|
| 前端 | Next.js (React) + Tailwind CSS |
| 后端 | Python FastAPI |
| 向量存储 | FAISS（本地持久化） |
| 关系型存储 | SQLite |
| 文档解析 | LangChain (PDF + DOCX) |
| 意图分类 | OpenAI API（zero-shot） |
| 前端集成 | Telegram Bot API + Microsoft Teams Bot |
| 部署 | Docker Compose（本地） |

## 待确认问题

~~❓ 前端框架选择：需求文档提到 Option A (Streamlit) 和 Option B (Next.js)。考虑到 Admin Dashboard 的复杂度（5个核心页面），是否优先选 Next.js？architecture agent 阶段需与用户确认。~~ → **已解答，见结论**

~~❓ 部署平台：需求文档提到 Render / Vercel。是否需要本地 demo 即可，还是必须云端部署？release agent 阶段需与用户确认。~~ → **已解答，见结论**

~~❓ 前端集成优先级：Telegram 和 Teams/WhatsApp 哪个优先实现？如果时间紧张，主攻哪两个？prd agent 阶段需与用户确认。~~ → **已解答，见结论**

## 关联任务

- `AGENTS.md`（已创建）
- `01-discovery/STATUS.md`
- `prd/STATUS.md`
- `architecture/STATUS.md`
- `frontend/STATUS.md`
- `backend/STATUS.md`
- `qa/STATUS.md`
- `release/STATUS.md`
